#include <boost/python/module.hpp>
#include <boost/python/scope.hpp>
#include <boost/python/docstring_options.hpp>

// See http://docs.scipy.org/doc/numpy/reference/c-api.array.html#PY_ARRAY_UNIQUE_SYMBOL
#define PY_ARRAY_UNIQUE_SYMBOL MICROMANTID_ARRAY_API
#include <numpy/arrayobject.h>

#include "registrations.hpp"

void init_kernel();
void init_geometry();
void init_api();
void init_dataobjects();

BOOST_PYTHON_MODULE(_micromantid)
{
  // Doc string options - User defined, python arguments, C++ call signatures
  boost::python::docstring_options docstrings(true, true, false);
  // Import numpy
  _import_array();

  // https://linuxtut.com/en/038bf30933d56cb845af/
  boost::python::object package = boost::python::scope();
  package.attr("__path__") = "micromantid";
  init_kernel();
  init_geometry();
  init_api();
  init_dataobjects();
#ifdef EMSCRIPTEN
  Mantid::DataObjects::register_ws_Workspace2D();
  Mantid::DataObjects::register_ws_MaskWorkspace();
  Mantid::DataObjects::register_ws_EventWorkspace();
  Mantid::DataObjects::register_ws_PeaksWorkspace();
  Mantid::DataObjects::register_ws_RebinnedOutput();
  Mantid::DataObjects::register_ws_TableWorkspace();
  Mantid::DataObjects::register_ws_GroupingWorkspace();
  Mantid::DataObjects::register_ws_SpecialWorkspace2D();
  Mantid::DataObjects::register_ws_WorkspaceSingleValue();
  Mantid::DataObjects::register_ws_LeanElasticPeaksWorkspace();
  Mantid::Algorithms::register_alg_FFT();
  Mantid::Algorithms::register_alg_Max();
  Mantid::Algorithms::register_alg_Min();
  Mantid::Algorithms::register_alg_Qxy();
  Mantid::Algorithms::register_alg_Plus();
  Mantid::Algorithms::register_alg_Q1D2();
  Mantid::Algorithms::register_alg_GetEi();
  Mantid::Algorithms::register_alg_Minus();
  Mantid::Algorithms::register_alg_Pause();
  Mantid::Algorithms::register_alg_Power();
  Mantid::Algorithms::register_alg_Rebin();
  Mantid::Algorithms::register_alg_Scale();
  Mantid::Algorithms::register_alg_SofQW();
  Mantid::Algorithms::register_alg_Divide();
  Mantid::Algorithms::register_alg_GetEi2();
  Mantid::Algorithms::register_alg_MaxEnt();
  Mantid::Algorithms::register_alg_MaxMin();
  Mantid::Algorithms::register_alg_ScaleX();
  Mantid::Algorithms::register_alg_Stitch();
  Mantid::Algorithms::register_alg_AddPeak();
  Mantid::Algorithms::register_alg_Comment();
  Mantid::Algorithms::register_alg_FindEPP();
  Mantid::Algorithms::register_alg_FitPeak();
  Mantid::Algorithms::register_alg_RealFFT();
  Mantid::Algorithms::register_alg_Rebin2D();
  Mantid::Algorithms::register_alg_Rebunch();
  Mantid::Algorithms::register_alg_Regroup();
  Mantid::Algorithms::register_alg_ChopData();
  Mantid::Algorithms::register_alg_CopyLogs();
  Mantid::Algorithms::register_alg_FitPeaks();
  Mantid::Algorithms::register_alg_GetAllEi();
  Mantid::Algorithms::register_alg_MaskBins();
  Mantid::Algorithms::register_alg_Multiply();
  Mantid::Algorithms::register_alg_Segfault();
  Mantid::Algorithms::register_alg_Stitch1D();
  Mantid::Algorithms::register_alg_CreateEPP();
  Mantid::Algorithms::register_alg_DeleteLog();
  Mantid::Algorithms::register_alg_FFTSmooth();
  Mantid::Algorithms::register_alg_FindPeaks();
  Mantid::Algorithms::register_alg_Logarithm();
  Mantid::Algorithms::register_alg_MergeLogs();
  Mantid::Algorithms::register_alg_MergeRuns();
  Mantid::Algorithms::register_alg_RadiusSum();
  Mantid::Algorithms::register_alg_ResampleX();
  Mantid::Algorithms::register_alg_SortXAxis();
  Mantid::Algorithms::register_alg_Transpose();
  Mantid::Algorithms::register_alg_UnwrapSNS();
  Mantid::Algorithms::register_alg_CopySample();
  Mantid::Algorithms::register_alg_FFTSmooth2();
  Mantid::Algorithms::register_alg_InvertMask();
  Mantid::Algorithms::register_alg_MaskBinsIf();
  Mantid::Algorithms::register_alg_RemoveBins();
  Mantid::Algorithms::register_alg_SassenaFFT();
  Mantid::Algorithms::register_alg_SmoothData();
  Mantid::Algorithms::register_alg_SolidAngle();
  Mantid::Algorithms::register_alg_SortEvents();
  Mantid::Algorithms::register_alg_StripPeaks();
  Mantid::Algorithms::register_alg_SumSpectra();
  Mantid::Algorithms::register_alg_CorrectKiKf();
  Mantid::Algorithms::register_alg_Exponential();
  Mantid::Algorithms::register_alg_ExtractMask();
  Mantid::Algorithms::register_alg_Integration();
  Mantid::Algorithms::register_alg_IQTransform();
  Mantid::Algorithms::register_alg_LineProfile();
  Mantid::Algorithms::register_alg_Q1DWeighted();
  Mantid::Algorithms::register_alg_RebinRagged();
  Mantid::Algorithms::register_alg_RingProfile();
  Mantid::Algorithms::register_alg_SofQWCentre();
  Mantid::Algorithms::register_alg_AddSampleLog();
  Mantid::Algorithms::register_alg_CalculateIqt();
  Mantid::Algorithms::register_alg_ConjoinXRuns();
  Mantid::Algorithms::register_alg_ConvertUnits();
  Mantid::Algorithms::register_alg_FilterByTime();
  Mantid::Algorithms::register_alg_FilterEvents();
  Mantid::Algorithms::register_alg_GetEiMonDet3();
  Mantid::Algorithms::register_alg_IntegrateEPP();
  Mantid::Algorithms::register_alg_ShiftLogTime();
  Mantid::Algorithms::register_alg_SofQWPolygon();
  Mantid::Algorithms::register_alg_Stitch1DMany();
  Mantid::Algorithms::register_alg_SumRowColumn();
  Mantid::Algorithms::register_alg_WeightedMean();
  Mantid::Algorithms::register_alg_WienerSmooth();
  Mantid::Algorithms::register_alg_AppendSpectra();
  Mantid::Algorithms::register_alg_CalculateDIFC();
  Mantid::Algorithms::register_alg_ChangeLogTime();
  Mantid::Algorithms::register_alg_ClearMaskFlag();
  Mantid::Algorithms::register_alg_CopyDataRange();
  Mantid::Algorithms::register_alg_CorrectToFile();
  Mantid::Algorithms::register_alg_CropWorkspace();
  Mantid::Algorithms::register_alg_ElasticWindow();
  Mantid::Algorithms::register_alg_FFTDerivative();
  Mantid::Algorithms::register_alg_GeneratePeaks();
  Mantid::Algorithms::register_alg_MultiplyRange();
  Mantid::Algorithms::register_alg_PDCalibration();
  Mantid::Algorithms::register_alg_PoissonErrors();
  Mantid::Algorithms::register_alg_RemoveSpectra();
  Mantid::Algorithms::register_alg_SumNeighbours();
  Mantid::Algorithms::register_alg_UnwrapMonitor();
  Mantid::Algorithms::register_alg_AlignDetectors();
  Mantid::Algorithms::register_alg_AverageLogData();
  Mantid::Algorithms::register_alg_ChangeTimeZero();
  Mantid::Algorithms::register_alg_CloneWorkspace();
  Mantid::Algorithms::register_alg_CombineDiffCal();
  Mantid::Algorithms::register_alg_ConvertDiffCal();
  Mantid::Algorithms::register_alg_CorrectTOFAxis();
  Mantid::Algorithms::register_alg_CrossCorrelate();
  Mantid::Algorithms::register_alg_ExtractSpectra();
  Mantid::Algorithms::register_alg_FilterByXValue();
  Mantid::Algorithms::register_alg_MaskInstrument();
  Mantid::Algorithms::register_alg_ModeratorTzero();
  Mantid::Algorithms::register_alg_MostLikelyMean();
  Mantid::Algorithms::register_alg_ResetNegatives();
  Mantid::Algorithms::register_alg_CalculateZscore();
  Mantid::Algorithms::register_alg_ChangeBinOffset();
  Mantid::Algorithms::register_alg_ChangePulsetime();
  Mantid::Algorithms::register_alg_CreateWorkspace();
  Mantid::Algorithms::register_alg_CropToComponent();
  Mantid::Algorithms::register_alg_DeleteWorkspace();
  Mantid::Algorithms::register_alg_FilterBadPulses();
  Mantid::Algorithms::register_alg_GetQsInQENSData();
  Mantid::Algorithms::register_alg_GroupWorkspaces();
  Mantid::Algorithms::register_alg_MaskDetectorsIf();
  Mantid::Algorithms::register_alg_RayTracerTester();
  Mantid::Algorithms::register_alg_RemoveLowResTOF();
  Mantid::Algorithms::register_alg_RenameWorkspace();
  Mantid::Algorithms::register_alg_SignalOverError();
  Mantid::Algorithms::register_alg_SpatialGrouping();
  Mantid::Algorithms::register_alg_AddLogDerivative();
  Mantid::Algorithms::register_alg_AddTimeSeriesLog();
  Mantid::Algorithms::register_alg_ApplyCalibration();
  Mantid::Algorithms::register_alg_CalculatePlaczek();
  Mantid::Algorithms::register_alg_DeleteWorkspaces();
  Mantid::Algorithms::register_alg_EQSANSResolution();
  Mantid::Algorithms::register_alg_FilterByLogValue();
  Mantid::Algorithms::register_alg_NormaliseToUnity();
  Mantid::Algorithms::register_alg_RebinToWorkspace();
  Mantid::Algorithms::register_alg_RemoveBackground();
  Mantid::Algorithms::register_alg_RenameWorkspaces();
  Mantid::Algorithms::register_alg_SetUncertainties();
  Mantid::Algorithms::register_alg_SmoothNeighbours();
  Mantid::Algorithms::register_alg_UnGroupWorkspace();
  Mantid::Algorithms::register_alg_CompareWorkspaces();
  Mantid::Algorithms::register_alg_ConjoinWorkspaces();
  Mantid::Algorithms::register_alg_FindDeadDetectors();
  Mantid::Algorithms::register_alg_FindPeaksConvolve();
  Mantid::Algorithms::register_alg_FlipperEfficiency();
  Mantid::Algorithms::register_alg_He3TubeEfficiency();
  Mantid::Algorithms::register_alg_LorentzCorrection();
  Mantid::Algorithms::register_alg_MaskBinsFromTable();
  Mantid::Algorithms::register_alg_RebinByPulseTimes();
  Mantid::Algorithms::register_alg_RemovePromptPulse();
  Mantid::Algorithms::register_alg_TOFSANSResolution();
  Mantid::Algorithms::register_alg_AnyShapeAbsorption();
  Mantid::Algorithms::register_alg_BinaryOperateMasks();
  Mantid::Algorithms::register_alg_CalculateCountRate();
  Mantid::Algorithms::register_alg_ConvertToHistogram();
  Mantid::Algorithms::register_alg_ConvertToPointData();
  Mantid::Algorithms::register_alg_CreateDummyCalFile();
  Mantid::Algorithms::register_alg_CreatePSDBleedMask();
  Mantid::Algorithms::register_alg_CylinderAbsorption();
  Mantid::Algorithms::register_alg_DeadTimeCorrection();
  Mantid::Algorithms::register_alg_DetectorDiagnostic();
  Mantid::Algorithms::register_alg_EQSANSCorrectFrame();
  Mantid::Algorithms::register_alg_EQSANSTofStructure();
  Mantid::Algorithms::register_alg_EstimateDivergence();
  Mantid::Algorithms::register_alg_ExtractFFTSpectrum();
  Mantid::Algorithms::register_alg_ExtractMaskToTable();
  Mantid::Algorithms::register_alg_FindPeakBackground();
  Mantid::Algorithms::register_alg_GetDetectorOffsets();
  Mantid::Algorithms::register_alg_GroupToXResolution();
  Mantid::Algorithms::register_alg_InterpolatingRebin();
  Mantid::Algorithms::register_alg_MedianDetectorTest();
  Mantid::Algorithms::register_alg_NormaliseByCurrent();
  Mantid::Algorithms::register_alg_NormaliseToMonitor();
  Mantid::Algorithms::register_alg_ParallaxCorrection();
  Mantid::Algorithms::register_alg_PowerLawCorrection();
  Mantid::Algorithms::register_alg_ReadGroupsFromFile();
  Mantid::Algorithms::register_alg_StripVanadiumPeaks();
  Mantid::Algorithms::register_alg_ApplyFloodWorkspace();
  Mantid::Algorithms::register_alg_CalculateEfficiency();
  Mantid::Algorithms::register_alg_ConvertSpectrumAxis();
  Mantid::Algorithms::register_alg_ConvertToConstantL2();
  Mantid::Algorithms::register_alg_CopyDetectorMapping();
  Mantid::Algorithms::register_alg_CreateDetectorTable();
  Mantid::Algorithms::register_alg_CropWorkspaceRagged();
  Mantid::Algorithms::register_alg_ExportTimeSeriesLog();
  Mantid::Algorithms::register_alg_FlatPlateAbsorption();
  Mantid::Algorithms::register_alg_NormaliseByDetector();
  Mantid::Algorithms::register_alg_PDFFourierTransform();
  Mantid::Algorithms::register_alg_PolarizerEfficiency();
  Mantid::Algorithms::register_alg_RebinByTimeAtSample();
  Mantid::Algorithms::register_alg_RemoveMaskedSpectra();
  Mantid::Algorithms::register_alg_SphericalAbsorption();
  Mantid::Algorithms::register_alg_StripVanadiumPeaks2();
  Mantid::Algorithms::register_alg_SumEventsByLogValue();
  Mantid::Algorithms::register_alg_SumOverlappingTubes();
  Mantid::Algorithms::register_alg_UnwrapMonitorsInTOF();
  Mantid::Algorithms::register_alg_ApplyDetailedBalance();
  Mantid::Algorithms::register_alg_CalculateEfficiency2();
  Mantid::Algorithms::register_alg_ConvertAxisByFormula();
  Mantid::Algorithms::register_alg_ConvertSpectrumAxis2();
  Mantid::Algorithms::register_alg_CreateCalFileByNames();
  Mantid::Algorithms::register_alg_CreateFloodWorkspace();
  Mantid::Algorithms::register_alg_CreatePeaksWorkspace();
  Mantid::Algorithms::register_alg_DiffractionFocussing();
  Mantid::Algorithms::register_alg_GenerateEventsFilter();
  Mantid::Algorithms::register_alg_GeneratePythonScript();
  Mantid::Algorithms::register_alg_IntegrateByComponent();
  Mantid::Algorithms::register_alg_ModeratorTzeroLinear();
  Mantid::Algorithms::register_alg_MonteCarloAbsorption();
  Mantid::Algorithms::register_alg_PDFFourierTransform2();
  Mantid::Algorithms::register_alg_PolynomialCorrection();
  Mantid::Algorithms::register_alg_ReplaceSpecialValues();
  Mantid::Algorithms::register_alg_AnnularRingAbsorption();
  Mantid::Algorithms::register_alg_CalculateDynamicRange();
  Mantid::Algorithms::register_alg_CalculateTransmission();
  Mantid::Algorithms::register_alg_ConvertToDistribution();
  Mantid::Algorithms::register_alg_CorelliCrossCorrelate();
  Mantid::Algorithms::register_alg_CreateSampleWorkspace();
  Mantid::Algorithms::register_alg_DetectorEfficiencyCor();
  Mantid::Algorithms::register_alg_DiffractionFocussing2();
  Mantid::Algorithms::register_alg_ExponentialCorrection();
  Mantid::Algorithms::register_alg_ExtractSingleSpectrum();
  Mantid::Algorithms::register_alg_FixGSASInstrumentFile();
  Mantid::Algorithms::register_alg_HRPDSlabCanAbsorption();
  Mantid::Algorithms::register_alg_MaskBinsFromWorkspace();
  Mantid::Algorithms::register_alg_PaddingAndApodization();
  Mantid::Algorithms::register_alg_ApplyInstrumentToPeaks();
  Mantid::Algorithms::register_alg_Bin2DPowderDiffraction();
  Mantid::Algorithms::register_alg_ConvertAxesToRealSpace();
  Mantid::Algorithms::register_alg_CreateLogPropertyTable();
  Mantid::Algorithms::register_alg_EditInstrumentGeometry();
  Mantid::Algorithms::register_alg_ExtractUnmaskedSpectra();
  Mantid::Algorithms::register_alg_IdentifyNoisyDetectors();
  Mantid::Algorithms::register_alg_MaskNonOverlappingBins();
  Mantid::Algorithms::register_alg_MayersSampleCorrection();
  Mantid::Algorithms::register_alg_OneMinusExponentialCor();
  Mantid::Algorithms::register_alg_PerformIndexOperations();
  Mantid::Algorithms::register_alg_RemoveWorkspaceHistory();
  Mantid::Algorithms::register_alg_SetInstrumentParameter();
  Mantid::Algorithms::register_alg_SofQWNormalisedPolygon();
  Mantid::Algorithms::register_alg_CalculateFlatBackground();
  Mantid::Algorithms::register_alg_ConvertFromDistribution();
  Mantid::Algorithms::register_alg_ConvertToEventWorkspace();
  Mantid::Algorithms::register_alg_CorelliCalibrationApply();
  Mantid::Algorithms::register_alg_CreateGroupingWorkspace();
  Mantid::Algorithms::register_alg_CreateLogTimeCorrection();
  Mantid::Algorithms::register_alg_DirectILLTubeBackground();
  Mantid::Algorithms::register_alg_GenerateIPythonNotebook();
  Mantid::Algorithms::register_alg_GeneratePythonFitScript();
  Mantid::Algorithms::register_alg_HyspecScharpfCorrection();
  Mantid::Algorithms::register_alg_MagFormFactorCorrection();
  Mantid::Algorithms::register_alg_PointByPointVCorrection();
  Mantid::Algorithms::register_alg_WeightedMeanOfWorkspace();
  Mantid::Algorithms::register_alg_WorkflowAlgorithmRunner();
  Mantid::Algorithms::register_alg_ConvertToMatrixWorkspace();
  Mantid::Algorithms::register_alg_CopyInstrumentParameters();
  Mantid::Algorithms::register_alg_CreateFlatEventWorkspace();
  Mantid::Algorithms::register_alg_FindCenterOfMassPosition();
  Mantid::Algorithms::register_alg_HeliumAnalyserEfficiency();
  Mantid::Algorithms::register_alg_MonitorEfficiencyCorUser();
  Mantid::Algorithms::register_alg_RemoveInstrumentGeometry();
  Mantid::Algorithms::register_alg_TOFSANSResolutionByPixel();
  Mantid::Algorithms::register_alg_VesuvioL1ThetaResolution();
  Mantid::Algorithms::register_alg_XrayAbsorptionCorrection();
  Mantid::Algorithms::register_alg_CarpenterSampleCorrection();
  Mantid::Algorithms::register_alg_ClearInstrumentParameters();
  Mantid::Algorithms::register_alg_CreateMonteCarloWorkspace();
  Mantid::Algorithms::register_alg_DetectorEfficiencyCorUser();
  Mantid::Algorithms::register_alg_FindCenterOfMassPosition2();
  Mantid::Algorithms::register_alg_PolarizationEfficiencyCor();
  Mantid::Algorithms::register_alg_ResizeRectangularDetector();
  Mantid::Algorithms::register_alg_CorelliCalibrationDatabase();
  Mantid::Algorithms::register_alg_FindDetectorsOutsideLimits();
  Mantid::Algorithms::register_alg_ApplyTransmissionCorrection();
  Mantid::Algorithms::register_alg_CreateSingleValuedWorkspace();
  Mantid::Algorithms::register_alg_CreateUserDefinedBackground();
  Mantid::Algorithms::register_alg_CuboidGaugeVolumeAbsorption();
  Mantid::Algorithms::register_alg_DetectorEfficiencyVariation();
  Mantid::Algorithms::register_alg_GeneralisedSecondDifference();
  Mantid::Algorithms::register_alg_GetTimeSeriesLogInformation();
  Mantid::Algorithms::register_alg_MultipleScatteringCorrection();
  Mantid::Algorithms::register_alg_PDDetermineCharacterizations();
  Mantid::Algorithms::register_alg_PolarizationCorrectionWildes();
  Mantid::Algorithms::register_alg_CalculatePolynomialBackground();
  Mantid::Algorithms::register_alg_ConvertTableToMatrixWorkspace();
  Mantid::Algorithms::register_alg_EstimateResolutionDiffraction();
  Mantid::Algorithms::register_alg_CalculatePlaczekSelfScattering();
  Mantid::Algorithms::register_alg_ConvertUnitsUsingDetectorTable();
  Mantid::Algorithms::register_alg_PolarizationEfficienciesWildes();
  Mantid::Algorithms::register_alg_CalculatePlaczekSelfScattering2();
  Mantid::Algorithms::register_alg_DepolarizedAnalyserTransmission();
  Mantid::Algorithms::register_alg_PolarizationCorrectionFredrikze();
  Mantid::Algorithms::register_alg_AddAbsorptionWeightedPathLengths();
  Mantid::Algorithms::register_alg_PaalmanPingsAbsorptionCorrection();
  Mantid::Algorithms::register_alg_CalculateTransmissionBeamSpreader();
  Mantid::Algorithms::register_alg_CalculateCarpenterSampleCorrection();
  Mantid::Algorithms::register_alg_DiffractionEventCalibrateDetectors();
  Mantid::Algorithms::register_alg_DiscusMultipleScatteringCorrection();
  Mantid::Algorithms::register_alg_GenerateGoniometerIndependentBackground();
#endif
}
